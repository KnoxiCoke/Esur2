<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ESUR CM Hypersensitivity Support</title>

  <!-- GitHub Pages safe relative path -->
  <link rel="stylesheet" href="./style.css" />
</head>
<body>

<header class="topbar">
  <div class="topbar__title">ESUR CM Hypersensitivity Support</div>
  <button class="topbar__reset" id="resetBtn">Reset</button>
</header>

<main class="app" id="app">

  <section class="banner">
    <div class="banner__left">
      <div class="banner__headline">Educational tool (ESUR CMSC 2025)</div>
      <div class="banner__sub">
        No patient data stored. Does not replace clinical judgement or local protocols.
      </div>
    </div>
    <div class="banner__right">
      <span class="badge">Offline-ready</span>
    </div>
  </section>

  <!-- QUICK FLOW -->
  <section class="view" id="view-flow">
    <h1 class="h1">Quick Flow</h1>
    <p class="p-muted">Reach an operational recommendation in ≤ 3 taps.</p>

    <div class="card">
      <div class="card__title">Step 1 — Situation</div>
      <div class="seg">
        <button class="seg__btn is-on" data-seg="situation" data-value="elective">Elective</button>
        <button class="seg__btn" data-seg="situation" data-value="emergency">Emergency</button>
      </div>
    </div>

    <div class="card">
      <div class="card__title">Step 2 — Prior reaction</div>
      <div class="seg">
        <button class="seg__btn is-on" data-seg="reaction" data-value="moderate">Moderate / Severe</button>
        <button class="seg__btn" data-seg="reaction" data-value="mild">Mild / Unclear</button>
      </div>
    </div>

    <div class="card card--output">
      <div class="card__title">Recommendation</div>
      <div class="output" id="flowOutput"></div>
    </div>

    <div class="card card--subtle">
      <div class="card__title">Safety net</div>
      <div class="output">
        If a breakthrough reaction occurs → follow <strong>Poster 1 (Acute Management)</strong> and local emergency protocols.
      </div>
    </div>
  </section>

  <!-- SWITCHING MATRIX -->
  <section class="view" id="view-switch" hidden>
    <h1 class="h1">Switching Assistant</h1>
    <p class="p-muted">Select the involved contrast agent.</p>

    <div class="card">
      <div class="card__title">ICM (Iodine-based)</div>
      <div class="seg">
        <button class="seg__btn" data-seg="icm" data-value="A">Group A</button>
        <button class="seg__btn" data-seg="icm" data-value="B">Group B</button>
        <button class="seg__btn" data-seg="icm" data-value="C">Group C</button>
        <button class="seg__btn" data-seg="icm" data-value="D">Group D</button>
        <button class="seg__btn" data-seg="icm" data-value="unknown">Unknown</button>
      </div>
    </div>

    <div class="card card--output">
      <div class="card__title">Switch Recommendation</div>
      <div class="output" id="switchOutput"></div>
    </div>
  </section>

  <!-- TRYPTASE -->
  <section class="view" id="view-tryptase" hidden>
    <h1 class="h1">Tryptase Calculator</h1>

    <div class="card">
      <div class="card__title">Enter values</div>
      <input type="number" id="baseline" placeholder="Baseline (ng/mL)" />
      <input type="number" id="acute" placeholder="Acute (ng/mL)" />
      <button id="calcTryptase">Calculate</button>
    </div>

    <div class="card card--output">
      <div class="card__title">Result</div>
      <div class="output" id="tryptaseOutput"></div>
    </div>
  </section>

  <!-- NIHR -->
  <section class="view" id="view-nihr" hidden>
    <h1 class="h1">NIHR / SCAR Check</h1>

    <div class="card">
      <div class="card__title">Red Flags</div>
      <label><input type="checkbox" class="nihr-check" value="blister" /> Blistering</label><br>
      <label><input type="checkbox" class="nihr-check" value="mucosa" /> Mucosal involvement</label><br>
      <label><input type="checkbox" class="nihr-check" value="erosion" /> Erosions</label><br>
      <label><input type="checkbox" class="nihr-check" value="hemorrhagic" /> Hemorrhagic lesions</label>
    </div>

    <div class="card card--output">
      <div class="card__title">Assessment</div>
      <div class="output" id="nihrOutput"></div>
    </div>
  </section>

</main>

<nav class="bottomnav">
  <button class="bottomnav__btn is-on" data-nav="flow">Flow</button>
  <button class="bottomnav__btn" data-nav="switch">Switch</button>
  <button class="bottomnav__btn" data-nav="tryptase">Tryptase</button>
  <button class="bottomnav__btn" data-nav="nihr">NIHR</button>
</nav>

<script src="./script.js"></script>
</body>
</html>
